{"version":3,"file":"js/363.f87201da.js","mappings":"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","sources":["webpack://yian/./src/components/ztree/index.vue","webpack://yian/./src/components/ztree/js/tool.js","webpack://yian/src/components/ztree/index.vue","webpack://yian/./src/components/ztree/index.vue?1118","webpack://yian/./src/components/ztree/index.vue?55e7","webpack://yian/./src/views/permission/index.vue","webpack://yian/src/views/permission/index.vue","webpack://yian/./src/views/permission/index.vue?e653","webpack://yian/./src/views/permission/index.vue?5b79","webpack://yian/./src/api/menu/index.js","webpack://yian/./src/common/data/dictionaryData.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('ul',{staticClass:\"schema-tree-plus\",attrs:{\"id\":\"treeDemo\"}})])\n}]\n\nexport { render, staticRenderFns }","export default class ZTreeTool {\r\n  constructor (resourcesTree) {\r\n    // super();\r\n    this.resourcesTree = resourcesTree;\r\n    this.treeNode = null;\r\n  }\r\n\r\n  /**\r\n   * @Description 获取树\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   */\r\n  getTree () {\r\n    return this.resourcesTree;\r\n  }\r\n\r\n  /**\r\n   * @Description 设置点击事件\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @event\r\n   * @treeId\r\n   * @treeNode\r\n   * @clickFlag\r\n   */\r\n  setOnClick (clickFn) {\r\n    this.resourcesTree.setting.callback.onClick = clickFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 设置双击事件\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @event\r\n   * @treeId\r\n   * @treeNode\r\n   */\r\n  setOnDblClick (onDblClickFn) {\r\n    this.resourcesTree.setting.callback.onDblClick = onDblClickFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 用于捕获节点被拖拽的事件回调函数\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @event\r\n   * @treeId\r\n   * @treeNodes\r\n   */\r\n  setOnDrag (onDragFn) {\r\n    this.resourcesTree.setting.callback.onDrag = onDragFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 用于捕获节点被拖拽的事件回调函数\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @event\r\n   * @treeId\r\n   * @treeNodes\r\n   * @targetNode\r\n   * @moveType\r\n   * @isCopy\r\n   */\r\n  setOnDrop (onDropFn) {\r\n    this.resourcesTree.setting.callback.onDrop = onDropFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 设置点击前事件\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @treeId\r\n   * @treeNode\r\n   * @clickFlag\r\n   */\r\n  setBeforeClick (beforeClickFn) {\r\n    this.resourcesTree.setting.callback.beforeClick = beforeClickFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 设置鼠标双击时前事件\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @treeId\r\n   * @treeNode\r\n   */\r\n  setBeforeDblClick (beforeDblClickFn) {\r\n    this.resourcesTree.setting.callback.beforeDblClick = beforeDblClickFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 用于捕获父节点展开之前的事件回调函数，并且根据返回值确定是否允许展开操作\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @treeId\r\n   * @treeNode\r\n   */\r\n  setBeforeExpand (beforeExpandFn) {\r\n    this.resourcesTree.setting.callback.beforeExpand = beforeExpandFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 用于捕获节点被拖拽之前的事件回调函数，并且根据返回值确定是否允许开启拖拽操作\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @treeId\r\n   * @treeNode\r\n   */\r\n  setBeforeDrag (beforeDragFn) {\r\n    this.resourcesTree.setting.callback.beforeDrag = beforeDragFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 用于捕获节点拖拽操作结束之前的事件回调函数，并且根据返回值确定是否允许此拖拽操作\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @treeId\r\n   * @treeNodes\r\n   * @targetNode\r\n   * @moveType\r\n   * @isCopy\r\n   */\r\n  setBeforeDrop (beforeDropFn) {\r\n    this.resourcesTree.setting.callback.beforeDrop = beforeDropFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 设置勾选事件\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @event\r\n   * @treeId\r\n   * @treeNode\r\n   */\r\n  setOnCheck (checkFn) {\r\n    this.resourcesTree.setting.callback.onCheck = checkFn;\r\n  }\r\n\r\n  /**\r\n   * @Description 设置勾选前事件\r\n   * @author qianyinggenian\r\n   * @date 2023/9/20\r\n   * @treeId\r\n   * @treeNode\r\n   * @clickFlag\r\n   */\r\n  setBeforeCheck (beforeCheckFn) {\r\n    this.resourcesTree.setting.callback.beforeCheck = beforeCheckFn;\r\n  }\r\n\r\n  getSelectNode (event) {\r\n    const id = event.target.id;\r\n    const arr = id.split('Btn_');\r\n    const tId = $('#' + arr[0] + arr[1]).val();\r\n    return this.resourcesTree.getNodeByTId(tId);\r\n  }\r\n}\r\n","<template>\r\n  <div>\r\n    <ul id=\"treeDemo\" class=\"schema-tree-plus\"></ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { menuData } from '@/common/data';\r\nimport ZTreeTool from './js/tool';\r\n\r\nexport default {\r\n  name: 'index',\r\n  components: {},\r\n  data () {\r\n    return {\r\n      treeTool: null,\r\n      zTreeObj: {},\r\n      defaultSetting: {\r\n        view: {\r\n          /* 不显示ztree默认的图标 */\r\n          showIcon: false,\r\n          selectedMulti: false\r\n        },\r\n        edit: {\r\n          enable: true,\r\n          showRemoveBtn: false,\r\n          showRenameBtn: false,\r\n          drag: {\r\n            isMove: true,\r\n            isCopy: true\r\n          }\r\n        },\r\n        data: {\r\n          key: {\r\n            name: 'text'\r\n          },\r\n          simpleData: {\r\n            enable: true,\r\n            idKey: 'id',\r\n            pIdKey: 'parentId'\r\n          }\r\n        },\r\n        check: {\r\n          enable: true\r\n        }\r\n      },\r\n      zNodes: []\r\n    };\r\n  },\r\n  props: {\r\n    // https://www.treejs.cn/v3/api.php, 参考官方设置\r\n    setting: {\r\n      type: Object,\r\n      default: () => {\r\n      }\r\n    },\r\n    nodes: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    /** 自定义点击前函数 */\r\n    diyBeforeClick: {\r\n      type: Function\r\n    },\r\n    /** 自定义勾选前函数 */\r\n    diyBeforeCheck: {\r\n      type: Function\r\n    },\r\n    /** 是否默认选中第一个节点 */\r\n    isSelectFirstNode: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    isSetOperatePrivilege: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    setOperatePrivilege: {\r\n      type: Function\r\n    },\r\n    /** 自定义展开的层级 */\r\n    expandLevel: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    /** 是否展开全部，是则展开全部，否则自定义展开到相应的层级 */\r\n    expandAll: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  watch: {\r\n    nodes: {\r\n      handler (newVal, oldVal) {\r\n        if (newVal !== oldVal) {\r\n          this.zNodes = JSON.parse(JSON.stringify(newVal));\r\n          this.$nextTick(() => {\r\n            this.initZTree();\r\n          });\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    initZTree () {\r\n      const setting = $.extend(true, this.defaultSetting, this.setting);\r\n      const resourcesTree = $.fn.zTree.init($('#treeDemo'), setting, this.zNodes);\r\n      this.zTreeObj = resourcesTree;\r\n      this.treeTool = new ZTreeTool(resourcesTree);\r\n      this.treeTool.setBeforeClick(this.beforeClick);\r\n      this.treeTool.setBeforeCheck(this.beforeCheck);\r\n      this.treeTool.setOnClick(this.clickNode);\r\n      this.treeTool.setOnCheck(this.checkNode);\r\n      // 树节点自定按钮\r\n      if (this.isSetOperatePrivilege) {\r\n        if (this.setOperatePrivilege && typeof this.setOperatePrivilege === 'function') {\r\n          this.setOperatePrivilege(this.zTreeObj);\r\n        }\r\n      }\r\n      // 是否默认选中第一个节点\r\n      if (this.isSelectFirstNode) {\r\n        const nodes = this.zTreeObj.getNodes();\r\n        this.zTreeObj.selectNode(nodes[0]);\r\n        this.$emit('click', nodes[0]);\r\n      }\r\n      if (this.expandAll) {\r\n        // 展开全部\r\n        this.zTreeObj.expandAll(true);\r\n      } else {\r\n        // 自定义展开层级\r\n        let list = [];\r\n        for (let level = 0; level <= this.expandLevel; level++) {\r\n          const nodes = this.zTreeObj.getNodesByParam('level', level, null);\r\n          list = [...list, ...nodes];\r\n        }\r\n        list.forEach(value => {\r\n          this.zTreeObj.expandNode(value, true, false, false);\r\n        });\r\n      }\r\n      this.$emit('treeObj', {\r\n        zTreeObj: this.zTreeObj,\r\n        treeTool: this.treeTool\r\n      });\r\n    },\r\n    /**\r\n     * @Description 点击节点触发\r\n     * @author wangkangzhang\r\n     * @date 2023/9/19\r\n     */\r\n    clickNode (event, treeId, treeNode, clickFlag) {\r\n      event.preventDefault();\r\n      this.$emit('click', treeNode);\r\n    },\r\n    /**\r\n     * @Description 点击节点前触发\r\n     * @author wangkangzhang\r\n     * @date 2023/9/19\r\n     */\r\n    beforeClick (treeId, treeNode, clickFlag) {\r\n      if (this.diyBeforeClick && typeof this.diyBeforeClick === 'function') {\r\n        return this.diyBeforeClick(treeId, treeNode, clickFlag);\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    /**\r\n     * @Description 勾选节点触发\r\n     * @author wangkangzhang\r\n     * @date 2023/9/19\r\n     */\r\n    checkNode (event, treeId, treeNode) {\r\n      event.preventDefault();\r\n      const checkedNodesList = this.zTreeObj.getCheckedNodes();\r\n      this.$emit('check', treeNode, checkedNodesList);\r\n    },\r\n    /**\r\n     * @Description 勾选节点前触发\r\n     * @author wangkangzhang\r\n     * @date 2023/9/19\r\n     */\r\n    beforeCheck (treeId, treeNode) {\r\n      if (this.diyBeforeCheck && typeof this.diyBeforeCheck === 'function') {\r\n        return this.diyBeforeCheck(treeId, treeNode);\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2ad75f1a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ad75f1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('layout',{attrs:{\"is-show-left\":false}},[_c('div',{staticClass:\"layout-responsive-auto--column\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"toolbar\"},[_c('div',[_vm._v(\"类型：\")]),_c('proxySelect',{attrs:{\"options\":_vm.typeOptions},on:{\"change\":_vm.handleType},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}})],1),_c('div',{staticClass:\"layout-responsive-auto__grow content\"},[_c('ztree',{ref:\"ztree\",attrs:{\"nodes\":_vm.nodes,\"setting\":_vm.setting,\"is-set-operate-privilege\":true},on:{\"treeObj\":_vm.getTreeObj,\"check\":_vm.handleCheck}})],1),_c('div',{staticClass:\"btns-box\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"保存\")])],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <layout :is-show-left=\"false\">\r\n    <div slot=\"right\" class=\"layout-responsive-auto--column\">\r\n      <div class=\"toolbar\">\r\n        <div>类型：</div>\r\n        <proxySelect\r\n            v-model=\"type\"\r\n            :options=\"typeOptions\"\r\n            @change=\"handleType\"\r\n        >\r\n        </proxySelect>\r\n      </div>\r\n      <div class=\"layout-responsive-auto__grow content\">\r\n        <ztree\r\n            :nodes=\"nodes\"\r\n            :setting=\"setting\"\r\n            :is-set-operate-privilege=\"true\"\r\n            @treeObj=\"getTreeObj\"\r\n            @check=\"handleCheck\"\r\n            ref=\"ztree\"\r\n        />\r\n      </div>\r\n      <div class=\"btns-box\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"handleSave\">保存</el-button>\r\n      </div>\r\n    </div>\r\n  </layout>\r\n</template>\r\n\r\n<script>\r\nimport ztree from '@/components/ztree';\r\nimport proxySelect from '@/components/proxySelect/index.vue';\r\nimport { typeOptions } from '@/common/data/dictionaryData';\r\nimport menuApi from '@/api/menu';\r\nimport api from '@/api/permission';\r\n\r\nexport default {\r\n  name: 'index',\r\n  components: {\r\n    ztree,\r\n    proxySelect\r\n  },\r\n  data () {\r\n    return {\r\n      type: '',\r\n      typeId: '',\r\n      zTreeObj: {},\r\n      treeTool: null,\r\n      nodes: [],\r\n      checkList: [],\r\n      permissionList: [],\r\n      setting: {\r\n        data: {\r\n          key: {\r\n            name: 'name'\r\n          }\r\n        },\r\n        check: {\r\n          enable: true\r\n        }\r\n      },\r\n      treeNode: {},\r\n      typeOptions: typeOptions\r\n    };\r\n  },\r\n  props: {},\r\n  watch: {},\r\n  computed: {},\r\n  mounted () {\r\n    this.typeId = this.typeOptions[0].id;\r\n    this.type = this.typeOptions[0].value;\r\n    this.$nextTick(() => {\r\n      this.getInfo();\r\n    });\r\n  },\r\n  methods: {\r\n    /**\r\n     * @Description 获取权限数据\r\n     * @author qianyinggenian\r\n     * @date 2023/10/12\r\n     */\r\n    async getInfo () {\r\n      const res = await api.permissionDetail({ id: this.typeId });\r\n      const { code, data } = res;\r\n      if (code === 200) {\r\n        this.checkList = data.permission || [];\r\n        this.$nextTick(() => {\r\n          this.getTree();\r\n        });\r\n      }\r\n    },\r\n    /**\r\n     * @Description 获取导航数据\r\n     * @author qianyinggenian\r\n     * @date 2023/9/25\r\n     */\r\n    async getTree () {\r\n      const res = await menuApi.menuTree();\r\n      const { code, data, msg } = res;\r\n      if (code === 200) {\r\n        this.nodes = data.list || [];\r\n        this.checkList.forEach(value => {\r\n          this.nodes = this.nodes.map(item => {\r\n            if (item.id === value) {\r\n              item.checked = true;\r\n            }\r\n            return item;\r\n          });\r\n        });\r\n      } else {\r\n        this.$message.error(msg);\r\n      }\r\n    },\r\n    getTreeObj (params) {\r\n      this.zTreeObj = params.zTreeObj;\r\n      this.treeTool = params.treeTool;\r\n    },\r\n    /**\r\n     * @Description\r\n     * @author qianyinggenian\r\n     * @date 2023/10/12 0012\r\n     */\r\n    handleType (val) {\r\n      const result = this.typeOptions.find(item => item.value === val);\r\n      if (result) {\r\n        this.typeId = result.id;\r\n      } else {\r\n        this.typeId = '';\r\n      }\r\n      this.$nextTick(() => {\r\n        this.getInfo();\r\n      });\r\n    },\r\n    /**\r\n     * @Description 勾选节点触发\r\n     * @author qianyinggenian\r\n     * @date 2023/10/12 0012\r\n     */\r\n    handleCheck (treeNode, checkNodes) {\r\n      console.log('treeNode', treeNode);\r\n      console.log('checkNodes', checkNodes);\r\n      this.permissionList = checkNodes.map(value => value.id);\r\n    },\r\n    /**\r\n     * @Description 保存\r\n     * @author qianyinggenian\r\n     * @date 2023/10/12 0012\r\n     */\r\n    handleSave () {\r\n      this.$confirm('确定保存吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        this.loading = true;\r\n        const params = {\r\n          id: this.typeId,\r\n          type: this.type,\r\n          permission: this.permissionList\r\n        };\r\n        const res = await api.permissionSave(params);\r\n        if (res.code === 200) {\r\n          this.$message.success(res.msg);\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n        this.loading = false;\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消保存'\r\n        });\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@mixin flexStyle {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.content {\r\n  padding: 10px 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.btns-box {\r\n  @include flexStyle;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4d127ff4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4d127ff4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d127ff4\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/axios';\r\n\r\nexport default {\r\n  /**\r\n   * @Description 详情\r\n   * @author qianyinggenian\r\n   * @date 2023/9/22\r\n   */\r\n  menuDetail: (data) => request({\r\n    url: '/menu/detail',\r\n    method: 'post',\r\n    data\r\n  }),\r\n  /**\r\n   * @Description 新增保存\r\n   * @author qianyinggenian\r\n   * @date 2023/9/22\r\n   */\r\n  menuSave: (data) => {\r\n    return request({\r\n      url: '/menu/save',\r\n      method: 'post',\r\n      data\r\n    });\r\n  },\r\n  /**\r\n   * @Description 编辑保存\r\n   * @author qianyinggenian\r\n   * @date 2023/9/22\r\n   */\r\n  menuUpdate: (data) => {\r\n    return request({\r\n      url: '/menu/update',\r\n      method: 'post',\r\n      data\r\n    });\r\n  },\r\n  /**\r\n   * @Description 获取导航树信息\r\n   * @author qianyinggenian\r\n   * @date 2023/9/22\r\n   */\r\n  menuTree: (data) => {\r\n    return request({\r\n      url: '/menu/tree',\r\n      method: 'post',\r\n      data\r\n    });\r\n  },\r\n  /**\r\n   * @Description 删除\r\n   * @author qianyinggenian\r\n   * @date 2023/9/22\r\n   */\r\n  menuDelete: (data) => {\r\n    return request({\r\n      url: '/menu/delete',\r\n      method: 'post',\r\n      data\r\n    });\r\n  },\r\n  /**\r\n   * @Description 唯一性校验\r\n   * @author qianyinggenian\r\n   * @date 2023/9/22\r\n   */\r\n  menuUniqueness: (data) => {\r\n    return request({\r\n      url: '/menu/uniqueness',\r\n      method: 'post',\r\n      data\r\n    });\r\n  }\r\n};\r\n","export const typeOptions = [\r\n  {\r\n    value: '超管',\r\n    label: '超管',\r\n    id: 'EeFDC299-f42b-8cc7-1bfB-dF189C655661'\r\n  },\r\n  {\r\n    value: '用户',\r\n    label: '用户',\r\n    id: 'C82CB616-1173-2eA6-4dD1-b92EfF2406eb'\r\n  },\r\n  {\r\n    value: '访客',\r\n    label: '访客',\r\n    id: 'E59Dcfb1-0d6b-11C2-F884-6FC26e9815C3'\r\n  }\r\n];\r\nexport const accountStatusOptions = [\r\n  {\r\n    value: '启用',\r\n    label: '启用'\r\n  },\r\n  {\r\n    value: '禁用',\r\n    label: '禁用'\r\n  }\r\n];\r\nexport const yesOrNo = [\r\n  {\r\n    value: '1',\r\n    label: '是'\r\n  },\r\n  {\r\n    value: '0',\r\n    label: '否'\r\n  }\r\n];\r\n"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticClass","attrs","ZTreeTool","constructor","resourcesTree","treeNode","getTree","setOnClick","clickFn","setting","callback","onClick","setOnDblClick","onDblClickFn","onDblClick","setOnDrag","onDragFn","onDrag","setOnDrop","onDropFn","onDrop","setBeforeClick","beforeClickFn","beforeClick","setBeforeDblClick","beforeDblClickFn","beforeDblClick","setBeforeExpand","beforeExpandFn","beforeExpand","setBeforeDrag","beforeDragFn","beforeDrag","setBeforeDrop","beforeDropFn","beforeDrop","setOnCheck","checkFn","onCheck","setBeforeCheck","beforeCheckFn","beforeCheck","getSelectNode","event","id","target","arr","split","tId","$","val","getNodeByTId","name","components","data","treeTool","zTreeObj","defaultSetting","view","showIcon","selectedMulti","edit","enable","showRemoveBtn","showRenameBtn","drag","isMove","isCopy","key","simpleData","idKey","pIdKey","check","zNodes","props","type","Object","default","nodes","Array","diyBeforeClick","Function","diyBeforeCheck","isSelectFirstNode","Boolean","isSetOperatePrivilege","setOperatePrivilege","expandLevel","Number","expandAll","watch","handler","newVal","oldVal","JSON","parse","stringify","$nextTick","initZTree","immediate","computed","mounted","methods","extend","fn","zTree","init","clickNode","checkNode","getNodes","selectNode","$emit","list","level","getNodesByParam","forEach","value","expandNode","treeId","clickFlag","preventDefault","checkedNodesList","getCheckedNodes","component","slot","_v","typeOptions","on","handleType","model","$$v","expression","ref","getTreeObj","handleCheck","handleSave","ztree","proxySelect","typeId","checkList","permissionList","getInfo","res","api","permissionDetail","code","permission","menuApi","menuTree","msg","map","item","checked","$message","error","params","result","find","checkNodes","console","log","$confirm","confirmButtonText","cancelButtonText","then","loading","permissionSave","success","catch","message","menuDetail","request","url","method","menuSave","menuUpdate","menuDelete","menuUniqueness","label","accountStatusOptions","yesOrNo"],"sourceRoot":""}